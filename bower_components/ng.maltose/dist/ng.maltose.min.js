angular.module("ng.maltose",["ng","ngSanitize","ng.maltose.sha256","ng.maltose.templates","ui.bootstrap"]),function(){"use strict";var e='<div class="jumbotron"><div class="container"><h1>深感抱歉！</h1><p>我们暂时支持不了你的浏览器。</p><p>为了更好的体验我们的产品，推荐使用以下浏览器！</p><p><a href="https://www.baidu.com/s?wd=chrome">Chrome <span class="text-success">(推荐)</span></a><br/><a href="https://www.baidu.com/s?wd=firefox">Firefox</a><br/><a href="https://www.baidu.com/s?wd=360">360浏览器（极速模式）</a><a href="https://www.baidu.com/s?wd=360极速浏览器">360极速浏览器 </a><br/></p><p>其他浏览器的极速模式 或 支持H5的浏览器</p><p>ie系列不支持</p></div></div>',t=window.navigator.userAgent;t.indexOf("AppleWebKit")>-1||t.indexOf("Gecko")>-1||(document.body.innerHTML=e)}(),angular.module("ng.maltose.templates",[]).run(["$templateCache",function(e){e.put("views/alert.html",'<div class="modal-header">\n    <button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="close()"><span aria-hidden="true">&times;</span>\n    </button>\n    <h4 class="modal-title" ng-bind="title"></h4>\n</div>\n<div class="modal-body">\n    <p ng-bind="content"></p>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-primary" ng-click="ok()">确定</button>\n</div>'),e.put("views/confirm.html",'<div class="modal-header">\n    <button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="close()"><span aria-hidden="true">&times;</span>\n    </button>\n    <h4 class="modal-title" ng-bind="title"></h4>\n</div>\n<div class="modal-body">\n    <p ng-bind="content"></p>\n</div>\n<div class="modal-footer">\n    <button class="btn btn-default" type="button" ng-click="cancel()">取消</button>\n    <button type="button" class="btn btn-primary" ng-click="ok()">确定</button>\n</div>'),e.put("views/grid.edit.html",'<div class="maltose-grid-edit" ng-dblclick="onEdit($event)">\n    <span ng-show="!edit">{{gridModel}}&nbsp;</span>\n    <input type="text" tabindex="-1" ng-model="gridModel" ng-show="edit" ng-blur="cancelEdit($event)" ng-keyup="onKey($event)" maltose-focus-on="maltoseGridEditInput"/>\n</div>'),e.put("views/grid.edit.select.html",'<div class="maltose-grid-edit" ng-dblclick="onEdit($event)">\n    <span ng-bind="gridModel" ng-show="!edit"></span>\n    <select tabindex="-1" ng-model="selected" ng-show="edit" maltose-focus-on="maltoseGridEditSelect" ng-blur="cancelEdit($event)" ng-options="value.name for value in selects" ng-change="onChange($event)" ng-keyup="onKey($event)">\n    </select>\n</div>'),e.put("views/grid.edit.switch.html",'<div class="maltose-grid-edit" ng-dblclick="onEdit($event)">\n    <span ng-bind="gridModel" ng-show="!(gridEditEver || edit)"></span>\n\n    <md-switch class="md-primary" tabindex="-1" ng-model="gridModel" aria-label="Switch" maltose-focus-on="maltoseGridEditSwitch" ng-show="gridEditEver || edit" ng-blur="cancelEdit($event)" ng-keyup="onKey($event)" ng-change="onChange($event)"></md-switch>\n\n</div>'),e.put("views/grid.html",'<div class="maltose-grid">\n    <table class="table table-striped table-hover table-condensed">\n        <thead>\n        <tr>\n            <th ng-if="config.enableSelect" class="maltose-grid-select">\n                <input type="checkbox" ng-click="onCheckAll($event)"/>\n            </th>\n            <th ng-repeat="col in config.columns" ng-bind="col.name"></th>\n            <th ng-if="config.actions.length > 0">操作</th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr ng-repeat="(rowIndex, data) in config.data">\n            <td ng-if="config.enableSelect" class="maltose-grid-select">\n                <input type="checkbox" ng-model="data._checked"/>\n            </td>\n            <td ng-repeat="(columnIndex, col) in config.columns" style="{{col.style}}">\n                <span ng-if="!col.edit && col.render">\n                    <div maltose-compile html="{{col.render(data[col.field])}}"></div>\n                </span>\n                <span ng-if="!col.edit && !col.render" ng-bind="data[col.field]"></span>\n\n                <div ng-if="col.edit && col.editType === \'input\'">\n                    <div maltose-grid-edit grid-model="data[col.field]"\n                         grid-after-edit="onAfterEdit(value, col, data)"></div>\n                </div>\n                <div ng-if="col.edit && col.editType === \'select\'">\n                    <div maltose-grid-edit-select grid-model="data[col.field]" grid-edit-type="col.editType"\n                         grid-edit-data="col.editData()" grid-after-edit="onAfterEdit(value, col, data)"></div>\n                </div>\n                <div ng-if="col.edit && col.editType === \'switch\'">\n                    <div maltose-grid-edit-switch grid-model="data[col.field]"\n                         grid-after-edit="onAfterEdit(value, col, data)" grid-edit-ever="col.editEver"></div>\n                </div>\n            </td>\n\n            <td ng-if="config.actions.length > 0">\n                <button ng-repeat="act in config.actions" class="btn btn-default btn-xs {{act.className}}"\n                        ng-bind="act.html"\n                        ng-disabled="act.isDisabled(data, config.data, $event)"\n                        ng-click="act.action(data, config.data, $event)" ng-if="act.action"></button>\n            </td>\n        </tr>\n        </tbody>\n    </table>\n    <div class="clearfix">\n        <div class="pull-left" ng-if="config.enablePage">\n            <button class="btn btn-default" ng-click="getData()" ng-if="config.next">更多</button>\n            <button class="btn btn-default" ng-if="!config.next" ng-disabled="true">没有更多</button>\n        </div>\n        <div class="pull-left" ng-if="config.enableSelect && config.actions.length > 0">\n            <button ng-repeat="act in config.actions" ng-if="act.batch" class="btn btn-default {{act.className}}"\n                    ng-bind="act.html"\n                    ng-click="onBatch(act, $event)"></button>\n        </div>\n        <div class="pull-right">\n            <button class="btn btn-default" ng-if="config.enableExport && config.exportOptions.xls"\n                    ng-click="onExport(\'xls\')">导出xls\n            </button>\n            <button class="btn btn-default" ng-if="config.enableExport && config.exportOptions.csv"\n                    ng-click="onExport(\'csv\')">导出csv\n            </button>\n        </div>\n    </div>\n</div>'),e.put("views/progress.html",'<div class="maltose-progress" ng-if="show">\n    <md-progress-circular md-mode="indeterminate"></md-progress-circular>\n</div>'),e.put("views/prompt.html",'<div class="modal-header">\n    <button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="close()"><span\n            aria-hidden="true">&times;</span>\n    </button>\n    <h4 class="modal-title" ng-bind="title"></h4>\n</div>\n<div class="modal-body">\n    <p ng-bind="content"></p>\n\n    <form ng-submit="ok()" novalidate>\n        <input type="text" class="form-control" ng-model="word"/>\n    </form>\n</div>\n<div class="modal-footer">\n    <button class="btn btn-default" type="button" ng-click="cancel()">取消</button>\n    <button type="button" class="btn btn-primary" ng-click="ok()">确定</button>\n</div>'),e.put("views/scroll.html",'<div class="maltose-scroll">\n    <div>\n        <button class="btn btn-default" ng-click="onTop()" ng-if="top">\n            t\n        </button>\n\n        <button class="btn btn-default" ng-click="onBottom()" ng-if="bottom">\n            b\n        </button>\n    </div>\n</div>'),e.put("views/toast.html",'<div class="maltose-toast-container">\n    <div class="alert alert-info" ng-repeat="t in list" ng-bind="t.word"></div>\n</div>')}]),angular.module("ng.maltose").directive("maltoseCompile",["$compile",function(e){"use strict";return{replace:!0,restrict:"A",link:function(t,n,i){if(i.html){var o=e(i.html)(t);n.replaceWith(o)}}}}]),angular.module("ng.maltose").directive("maltoseDyCompile",["$compile",function(e){"use strict";return{replace:!0,restrict:"A",link:function(t,n,i){var o,r={$destroy:angular.noop},l=n,a=function(){(o||r).$destroy()};i.$observe("html",function(n){if(n){a(),o=t.$new(!0);var i=e(n)(t);l.replaceWith(i),l=i}t.$on("$destroy",a)})}}}]),angular.module("ng.maltose").directive("maltoseFocusOn",function(){"use strict";return function(e,t,n){return e.$on("maltoseFocusOn",function(e,i){return i===n.maltoseFocusOn?t[0].focus():void 0})}}),angular.module("ng.maltose.grid",["ng.maltose","ng.maltose.exporter"]).directive("maltoseGrid",["$maltose","$maltoseExporter",function(e,t){"use strict";return{restrict:"A",replace:!0,scope:{config:"="},templateUrl:"views/grid.html",controller:["$scope",function(n){_.each(n.config.columns,function(e){e.edit&&(e.afterEdit=e.afterEdit||function(){})}),_.each(n.config.data,function(e){e._checked=!1}),n.config=_.extend({watchReload:!1,enableSelect:!1,enableExport:!1,exportOptions:{xls:!0,csv:!0,force2String:!1},columns:null,data:[],next:null,actions:[]},n.config),n.checkAll=!1,n.onCheckAll=function(){n.checkAll=!n.checkAll,_.each(n.config.data,function(e){e._checked=n.checkAll})},n.onBatch=function(e,t){var i=_.filter(n.config.data,function(e){return e._checked});i.length>0&&e.batch(i,n.config.data,t)},n.onAfterEdit=function(t,n,i){var o=n.afterEdit(i,n,t.newValue,t.oldValue,t._id);o&&o.then(function(){e.tips("修改成功")},function(){e.tips("修改失败"),i[n.field]=t.oldValue})},n.onEditData=function(e){return e.editData()},n.$watch("config.watchReload",function(e){e&&(n.config.data=[],n.config.next=null,n.getData(),n.config.watchReload=!1)}),n.getData=function(){n.config.getData(n.config.next).then(function(e){_.each(e,function(e,t){"nextPageOffset"!==t&&"nextPageAnchor"!==t&&(n.config.data=n.config.data.concat(e||[]))}),n.config.next=e.nextPageOffset||e.nextPageAnchor})},n.getData(),n.onExport=function(e){var i=angular.copy(n.config.columns),o=angular.copy(n.config.data),r=_.map(_.filter(i,function(e){return e["export"]!==!1}),function(e){return{field:e.field,name:e.name,"export":e["export"]}});_.each(r,function(e){_.isFunction(e["export"])&&_.each(o,function(t){t[e.field]=e["export"](t[e.field])})}),"csv"===e?t.toCsv("table",o,r):"xls"===e&&t.toXls("table",o,r)}}]}}]).directive("maltoseGridEdit",["$maltoseFocusOn","$timeout",function(e,t){"use strict";return{restrict:"A",replace:!0,scope:{gridModel:"=",gridAfterEdit:"&"},templateUrl:"views/grid.edit.html",controller:["$scope","$element",function(n,i){n.edit=!1;var o=n.gridModel;i.closest("td").width(i.width()),n.onEdit=function(t){i.addClass("maltose-grid-edit-on"),n.edit=!0,e("maltoseGridEditInput")},n.cancelEdit=function(e){n.edit=!1},n.onKey=function(e){13===e.keyCode?(n.edit=!1,n.gridModel=e.target.value,t(function(){n.gridAfterEdit({value:{newValue:n.gridModel,oldValue:o}})},1)):27===e.keyCode&&(n.edit=!1,n.gridModel=o)}}]}}]).directive("maltoseGridEditSelect",["$maltoseFocusOn","$timeout",function(e,t){"use strict";return{restrict:"A",replace:!0,scope:{gridModel:"=",gridAfterEdit:"&",gridEditType:"@",gridEditData:"&"},templateUrl:"views/grid.edit.select.html",controller:["$scope","$element",function(n,i){n.edit=!1;var o=n.gridModel;n.selects=[],n.selected=null,n.gridEditData().then(function(e){n.selects=e,n.selected=_.find(e,function(e){return e.value===n.gridModel})}),i.closest("td").width(i.width()),n.onEdit=function(t){i.addClass("maltose-grid-edit-on"),n.edit=!0,e("maltoseGridEditSelect")},n.cancelEdit=function(){n.edit=!1},n.onKey=function(){27===event.keyCode&&(n.edit=!1,n.gridModel=o)},n.onChange=function(e){n.edit=!1,n.gridModel=n.selected.value,t(function(){n.gridAfterEdit({value:{newValue:n.gridModel,oldValue:o}})},1)}}]}}]).directive("maltoseGridEditSwitch",["$maltoseFocusOn","$timeout",function(e,t){"use strict";return{restrict:"A",replace:!0,scope:{gridModel:"=",gridAfterEdit:"&",gridEditEver:"="},templateUrl:"views/grid.edit.switch.html",controller:["$scope","$element",function(n,i){n.edit=!1,n.gridModel=n.gridModel||!1;var o=n.gridModel;i.closest("td").width(i.width()),n.onEdit=function(t){i.addClass("maltose-grid-edit-on"),n.edit=!0,e("maltoseGridEditSwitch")},n.cancelEdit=function(e){n.edit=!1},n.onKey=function(e){27===e.keyCode&&(n.edit=!1,n.gridModel=o)},n.onChange=function(e){n.edit=!1,t(function(){n.gridAfterEdit({value:{newValue:n.gridModel,oldValue:o}})},1)}}]}}]),angular.module("ng.maltose").directive("maltoseScroll",["$maltose",function(e){"use strict";return{restrict:"A",replace:!0,scope:{},templateUrl:"views/scroll.html",controller:["$scope","$element",function(t,n){var i=n.attr("maltose-scroll");i.indexOf("scroll-top")>-1&&(t.top=!0),i.indexOf("scroll-bottom")>-1&&(t.bottom=!0),t.onTop=function(){e.scroll.top()},t.onBottom=function(){e.scroll.bottom()}}]}}]),angular.module("ng.maltose.exporter",[]).factory("$maltoseExporter",function(){"use strict";function e(e,t){return[_.map(t,function(e){return e.name})].concat(_.map(e,function(e){return _.map(t,function(t){return e[t.field]+""})}))}var t=function(e){var t=e,n=-1!==e.indexOf(",")||-1!==e.indexOf("\r")||-1!==e.indexOf("\n"),i=-1!==e.indexOf('"');return i&&(t=t.replace(/"/g,'""')),(n||i)&&(t='"'+t+'"'),t},n=document.characterSet||"utf-8",i={json:"application/json;charset="+n,txt:"csv/txt;charset="+n,csv:"csv/txt;charset="+n,doc:"application/vnd.ms-doc",excel:"application/vnd.ms-excel"},o={};o.csv=function(n,i,o){return _.map(e(n,i),function(e){return _.map(e,function(e){return t(e)}).join(",")}).join("\n")},o.xls=function(t,i,o){var r='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:'+o+'" xmlns="http://www.w3.org/TR/REC-html40"><head><meta charset="'+n+'" /><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>Worksheet</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head><body>';return r+="<table><tbody>"+_.map(e(t,i),function(e,t){return"<tr>"+_.map(e,function(e,t){return"<td>"+e+"</td>"}).join("")+"</tr>"}).join("")+"</tbody></table>",r+="</html>"};var r=function(e){var t="."+e;return function(n,r,l){r=angular.copy(r),n=n||"table"+t,n.slice(-e.length-1)!==t&&(n+=t);var a=new Blob([o[e](r,l,e)],{type:i[e]});window.saveAs(a,n)}},l={toCsv:r("csv"),toXls:r("xls")};return l}),angular.module("ng.maltose").factory("$maltoseFocusOn",["$rootScope","$timeout",function(e,t){"use strict";return function(n){return t(function(){return e.$broadcast("maltoseFocusOn",n)})}}]),angular.module("ng.maltose").factory("$maltose",["$modal","$compile","$rootScope","$templateRequest","$timeout","$maltoseSha256","$q",function(e,t,n,i,o,r,l){"use strict";var a=function(t){return e.open({templateUrl:"views/alert.html",scope:$.extend(n.$new(),t),controller:["$scope","$modalInstance",function(e,t){e.ok=function(){t.close("ok")},e.cancel=function(){t.dismiss("cancel")},e.close=function(){t.dismiss("close")}}],size:"sm"}).result},u=function(t){return e.open({templateUrl:"views/confirm.html",scope:$.extend(n.$new(),t),controller:["$scope","$modalInstance",function(e,t){e.ok=function(){t.close("ok")},e.cancel=function(){t.dismiss("cancel")},e.close=function(){t.dismiss("close")}}],size:"sm"}).result},s=function(t){return e.open({templateUrl:"views/prompt.html",scope:$.extend(n.$new(),t),controller:["$scope","$modalInstance",function(e,t){e.ok=function(){t.close(e.word)},e.cancel=function(){t.dismiss("cancel")},e.close=function(){t.dismiss("close")}}],size:"sm"}).result},d=null,c=n.$new();c.list=[];var f=function(e,n,r){var a=l.defer();d||(d=!0,i("views/toast.html").then(function(e){d=$(e),$(document.body).append(d),t(d)(c)}));var u=+new Date;return c.list.unshift({word:e,_key_:u}),o(function(){c.list.splice(c.list.indexOf(_.find(c.list,function(e){return e._key_===u})),1),a.resolve({})},r||3e3),a.promise},p=null,m=n.$new();m.show=!1;var g={start:function(){p||(p=!0,i("views/progress.html").then(function(e){p=$(e),$(document.body).append(p),t(p)(m)})),m.show=!0},done:function(){m.show=!1}},h={set:function(e){var t=$("#_siteContent")[0];t.scrollTop=e},top:function(){h.set(0)},bottom:function(){h.set($("#_siteContent>div:first").height())},page:function(){h.set(document.body.scrollTop+document.documentElement.clientHeight)}},v=function(e,t){var n=e;return arguments.length<2?n:n=n.replace(/\{([\d\w\.]+)\}/g,function(e){var n=arguments[1].split("."),i=null;return _.each(n,function(e,n){i=n?i[e]:t[e]}),i})},b={str2date:function(e){var t=e.replace(/[-/:]/g," ").split(" ");return new Date(t[0],t[1]-1,t[2],t[3]||0,t[4]||0,t[5]||0,t[6]||0)}},E=null,x={set:function(e){E=e},get:function(){return E}},y={alert:a,confirm:u,prompt:s,tips:f,progress:g,scroll:h,format:v,sha256:r,userInfo:x,time:b};return window.ZL=y,y}]),angular.module("ng.maltose.sha256",[]).factory("$maltoseSha256",function(){"use strict";var e=function(e){function t(e,t){return t>>>e|t<<32-e}function n(e,t,n){return e&t^~e&n}function i(e,t,n){return e&t^e&n^t&n}function o(e){return t(2,e)^t(13,e)^t(22,e)}function r(e){return t(6,e)^t(11,e)^t(25,e)}function l(e){return t(7,e)^t(18,e)^e>>>3}function a(e){return t(17,e)^t(19,e)^e>>>10}function u(e,t){return e[15&t]+=a(e[t+14&15])+e[t+9&15]+l(e[t+1&15])}function s(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n}function d(){h=new Array(8),v=new Array(2),b=new Array(64),v[0]=v[1]=0,h[0]=1779033703,h[1]=3144134277,h[2]=1013904242,h[3]=2773480762,h[4]=1359893119,h[5]=2600822924,h[6]=528734635,h[7]=1541459225}function c(){var e,t,l,a,d,c,f,p,m,g,v=new Array(16);e=h[0],t=h[1],l=h[2],a=h[3],d=h[4],c=h[5],f=h[6],p=h[7];for(var x=0;16>x;x++)v[x]=b[(x<<2)+3]|b[(x<<2)+2]<<8|b[(x<<2)+1]<<16|b[x<<2]<<24;for(var y=0;64>y;y++)m=p+r(d)+n(d,c,f)+E[y],m+=16>y?v[y]:u(v,y),g=o(e)+i(e,t,l),p=f,f=c,c=d,d=s(a,m),a=l,l=t,t=e,e=s(m,g);h[0]+=e,h[1]+=t,h[2]+=l,h[3]+=a,h[4]+=d,h[5]+=c,h[6]+=f,h[7]+=p}function f(e,t){var n,i,o=0;i=v[0]>>3&63;var r=63&t;for((v[0]+=t<<3)<t<<3&&v[1]++,v[1]+=t>>29,n=0;t>n+63;n+=64){for(var l=i;64>l;l++)b[l]=e.charCodeAt(o++);c(),i=0}for(var l=0;r>l;l++)b[l]=e.charCodeAt(o++)}function p(){var e=v[0]>>3&63;if(b[e++]=128,56>=e)for(var t=e;56>t;t++)b[t]=0;else{for(var t=e;64>t;t++)b[t]=0;c();for(var t=0;56>t;t++)b[t]=0}b[56]=v[1]>>>24&255,b[57]=v[1]>>>16&255,b[58]=v[1]>>>8&255,b[59]=255&v[1],b[60]=v[0]>>>24&255,b[61]=v[0]>>>16&255,b[62]=v[0]>>>8&255,b[63]=255&v[0],c()}function m(){for(var e=new String,t=0;8>t;t++)for(var n=28;n>=0;n-=4)e+=x.charAt(h[t]>>>n&15);return e}function g(e){return d(),f(e,e.length),p(),m()}var h,v,b,E=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),x="0123456789abcdef";return g(e)};return e}),angular.module("ng.maltose.uploader",[]).service("$maltoseUploader",["$log","$q",function(e,t){"use strict";var n=function(e,n){var i=t.defer(),o=$(e),r=$.extend({height:37,buttonText:"上传",buttonClass:"maltose-btn-upload",removeCompleted:!0},n);if(""===o[0].id)throw"container id ?";if(r.url)throw" url ?";return o.uploadifive(r),i.promise},i=function(e,t){return t=$.extend({fileObjName:"attachment",buttonText:"上传文件",multi:!1},t),n(e,t)},o=function(e,t){return t=$.extend({fileObjName:"resFiles",buttonText:"上传图片",multi:!1},t),n(e,t)};return{fileUpload:i,imgUpload:o}}]),function(e){var t={init:function(n){return this.each(function(){var o=e(this);o.data("uploadifive",{inputs:{},inputCount:0,fileID:0,queue:{count:0,selected:0,replaced:0,errors:0,queued:0,cancelled:0},uploads:{current:0,attempts:0,successful:0,errors:0,count:0}});var r=o.data("uploadifive"),l=r.settings=e.extend({auto:!0,buttonClass:!1,buttonText:"Select Files",checkScript:!1,dnd:!0,dropTarget:!1,fileObjName:"Filedata",fileSizeLimit:0,fileType:!1,formData:{},height:30,itemTemplate:!1,method:"post",multi:!0,overrideEvents:[],queueID:!1,queueSizeLimit:0,removeCompleted:!1,simUploadLimit:0,truncateLength:0,uploadLimit:0,uploadScript:"uploadifive.php",width:100},n);if(isNaN(l.fileSizeLimit)){var a=1.024*parseInt(l.fileSizeLimit);l.fileSizeLimit.indexOf("KB")>-1?l.fileSizeLimit=1e3*a:l.fileSizeLimit.indexOf("MB")>-1?l.fileSizeLimit=1e6*a:l.fileSizeLimit.indexOf("GB")>-1&&(l.fileSizeLimit=1e9*a)}else l.fileSizeLimit=1024*l.fileSizeLimit;if(r.inputTemplate=e('<input type="file">').css({"font-size":l.height+"px",opacity:0,position:"absolute",right:"-3px",top:"-3px","z-index":999}),r.createInput=function(){var n=r.inputTemplate.clone(),i=n.name="input"+r.inputCount++;l.multi&&n.attr("multiple",!0),l.fileType&&n.attr("accept",l.fileType),n.bind("change",function(){r.queue.selected=0,r.queue.replaced=0,r.queue.errors=0,r.queue.queued=0;var n=this.files.length;if(r.queue.selected=n,r.queue.count+n>l.queueSizeLimit&&0!==l.queueSizeLimit)e.inArray("onError",l.overrideEvents)<0&&alert("The maximum number of queue items has been reached ("+l.queueSizeLimit+").  Please select fewer files."),"function"==typeof l.onError&&l.onError.call(o,"QUEUE_LIMIT_EXCEEDED");else{for(var a=0;n>a;a++)file=this.files[a],r.addQueueItem(file);r.inputs[i]=this,r.createInput()}l.auto&&t.upload.call(o),"function"==typeof l.onSelect&&l.onSelect.call(o,r.queue)}),r.currentInput&&r.currentInput.hide(),r.button.append(n),r.currentInput=n},r.destroyInput=function(t){e(r.inputs[t]).remove(),delete r.inputs[t],r.inputCount--},r.drop=function(n){r.queue.selected=0,r.queue.replaced=0,r.queue.errors=0,r.queue.queued=0;var i=n.dataTransfer,a=i.name="input"+r.inputCount++,u=i.files.length;if(r.queue.selected=u,r.queue.count+u>l.queueSizeLimit&&0!==l.queueSizeLimit)e.inArray("onError",l.overrideEvents)<0&&alert("The maximum number of queue items has been reached ("+l.queueSizeLimit+").  Please select fewer files."),"function"==typeof l.onError&&l.onError.call(o,"QUEUE_LIMIT_EXCEEDED");else{for(var s=0;u>s;s++)file=i.files[s],r.addQueueItem(file);r.inputs[a]=i}l.auto&&t.upload.call(o),"function"==typeof l.onDrop&&l.onDrop.call(o,i.files,i.files.length),n.preventDefault(),n.stopPropagation()},r.fileExistsInQueue=function(e){for(var t in r.inputs){input=r.inputs[t],limit=input.files.length;for(var n=0;n<limit;n++)if(existingFile=input.files[n],existingFile.name==e.name&&!existingFile.complete)return!0}return!1},r.removeExistingFile=function(e){for(var n in r.inputs){input=r.inputs[n],limit=input.files.length;for(var i=0;i<limit;i++)existingFile=input.files[i],existingFile.name!=e.name||existingFile.complete||(r.queue.replaced++,t.cancel.call(o,existingFile,!0))}},0==l.itemTemplate?r.queueItem=e('<div class="uploadifive-queue-item">                        <a class="close" href="#">X</a>                        <div><span class="filename"></span><span class="fileinfo"></span></div>                        <div class="progress">                            <div class="progress-bar"></div>                        </div>                    </div>'):r.queueItem=e(l.itemTemplate),r.addQueueItem=function(n){if(e.inArray("onAddQueueItem",l.overrideEvents)<0){r.removeExistingFile(n),n.queueItem=r.queueItem.clone(),n.queueItem.attr("id",l.id+"-file-"+r.fileID++),n.queueItem.find(".close").bind("click",function(){return t.cancel.call(o,n),!1});var i=n.name;i.length>l.truncateLength&&0!=l.truncateLength&&(i=i.substring(0,l.truncateLength)+"..."),n.queueItem.find(".filename").html(i),n.queueItem.data("file",n),r.queueEl.append(n.queueItem)}"function"==typeof l.onAddQueueItem&&l.onAddQueueItem.call(o,n),n.size>l.fileSizeLimit&&0!=l.fileSizeLimit?r.error("FILE_SIZE_LIMIT_EXCEEDED",n):(r.queue.queued++,r.queue.count++)},r.removeQueueItem=function(t,n,i){i||(i=0);var o=n?0:500;t.queueItem&&(" - Completed"!=t.queueItem.find(".fileinfo").html()&&t.queueItem.find(".fileinfo").html(" - Cancelled"),t.queueItem.find(".progress-bar").width(0),t.queueItem.delay(i).fadeOut(o,function(){e(this).remove()}),delete t.queueItem,r.queue.count--)},r.filesToUpload=function(){var e=0;for(var t in r.inputs){input=r.inputs[t],limit=input.files.length;for(var n=0;n<limit;n++)file=input.files[n],file.skip||file.complete||e++}return e},r.checkExists=function(n){if(e.inArray("onCheck",l.overrideEvents)<0){e.ajaxSetup({async:!1});var i=e.extend(l.formData,{filename:n.name});if(e.post(l.checkScript,i,function(e){n.exists=parseInt(e)}),n.exists&&!confirm("A file named "+n.name+" already exists in the upload folder.\nWould you like to replace it?"))return t.cancel.call(o,n),!0}return"function"==typeof l.onCheck&&l.onCheck.call(o,n,n.exists),!1},r.uploadFile=function(t,n){if(!t.skip&&!t.complete&&!t.uploading)if(t.uploading=!0,r.uploads.current++,r.uploads.attempted++,xhr=t.xhr=new XMLHttpRequest,"function"==typeof FormData||"object"==typeof FormData){var a=new FormData;a.append(l.fileObjName,t);for(i in l.formData)a.append(i,l.formData[i]);xhr.open(l.method,l.uploadScript,!0),xhr.upload.addEventListener("progress",function(e){e.lengthComputable&&r.progress(e,t)},!1),xhr.addEventListener("load",function(e){4==this.readyState&&(t.uploading=!1,200==this.status?"Invalid file type."!==t.xhr.responseText?r.uploadComplete(e,t,n):r.error(t.xhr.responseText,t,n):404==this.status?r.error("404_FILE_NOT_FOUND",t,n):403==this.status?r.error("403_FORBIDDEN",t,n):r.error("Unknown Error",t,n))}),xhr.send(a)}else{var u=new FileReader;u.onload=function(i){var a="-------------------------"+(new Date).getTime(),u="--",s="\r\n",d="";d+=u+a+s,d+='Content-Disposition: form-data; name="'+l.fileObjName+'"',t.name&&(d+='; filename="'+t.name+'"'),d+=s,d+="Content-Type: application/octet-stream"+s+s,d+=i.target.result+s;for(key in l.formData)d+=u+a+s,d+='Content-Disposition: form-data; name="'+key+'"'+s+s,d+=l.formData[key]+s;d+=u+a+u+s,xhr.upload.addEventListener("progress",function(e){r.progress(e,t)},!1),xhr.addEventListener("load",function(e){t.uploading=!1;var i=this.status;404==i?r.error("404_FILE_NOT_FOUND",t,n):"Invalid file type."!=t.xhr.responseText?r.uploadComplete(e,t,n):r.error(t.xhr.responseText,t,n)},!1);var c=l.uploadScript;if("get"==l.method){var f=e(l.formData).param();c+=f}xhr.open(l.method,l.uploadScript,!0),xhr.setRequestHeader("Content-Type","multipart/form-data; boundary="+a),"function"==typeof l.onUploadFile&&l.onUploadFile.call(o,t),xhr.sendAsBinary(d)},u.readAsBinaryString(t)}},r.progress=function(t,n){if(e.inArray("onProgress",l.overrideEvents)<0){if(t.lengthComputable)var i=Math.round(t.loaded/t.total*100);n.queueItem.find(".fileinfo").html(" - "+i+"%"),n.queueItem.find(".progress-bar").css("width",i+"%")}"function"==typeof l.onProgress&&l.onProgress.call(o,n,t)},r.error=function(n,i,a){if(e.inArray("onError",l.overrideEvents)<0){switch(n){case"404_FILE_NOT_FOUND":errorMsg="404 Error";break;case"403_FORBIDDEN":errorMsg="403 Forbidden";break;case"FORBIDDEN_FILE_TYPE":errorMsg="Forbidden File Type";break;case"FILE_SIZE_LIMIT_EXCEEDED":errorMsg="File Too Large";break;default:errorMsg="Unknown Error"}i.queueItem.addClass("error").find(".fileinfo").html(" - "+errorMsg),i.queueItem.find(".progress").remove()}"function"==typeof l.onError&&l.onError.call(o,n,i),i.skip=!0,"404_FILE_NOT_FOUND"==n?r.uploads.errors++:r.queue.errors++,a&&t.upload.call(o,null,!0)},r.uploadComplete=function(n,i,a){e.inArray("onUploadComplete",l.overrideEvents)<0&&(i.queueItem.find(".progress-bar").css("width","100%"),i.queueItem.find(".fileinfo").html(" - Completed"),i.queueItem.find(".progress").slideUp(250),i.queueItem.addClass("complete")),"function"==typeof l.onUploadComplete&&l.onUploadComplete.call(o,i,i.xhr.responseText),l.removeCompleted&&setTimeout(function(){t.cancel.call(o,i)},3e3),i.complete=!0,r.uploads.successful++,r.uploads.count++,r.uploads.current--,delete i.xhr,a&&t.upload.call(o,null,!0)},r.queueComplete=function(){"function"==typeof l.onQueueComplete&&l.onQueueComplete.call(o,r.uploads)},!(window.File&&window.FileList&&window.Blob&&(window.FileReader||window.FormData)))return"function"==typeof l.onFallback&&l.onFallback.call(o),!1;if(l.id="uploadifive-"+o.attr("id"),r.button=e('<div id="'+l.id+'" class="uploadifive-button">'+l.buttonText+"</div>"),l.buttonClass&&r.button.addClass(l.buttonClass),r.button.css({height:l.height,"line-height":l.height+"px",overflow:"hidden",position:"relative","text-align":"center",width:l.width}),o.before(r.button).appendTo(r.button).hide(),r.createInput.call(o),l.queueID?r.queueEl=e("#"+l.queueID):(l.queueID=l.id+"-queue",r.queueEl=e('<div id="'+l.queueID+'" class="uploadifive-queue" />'),r.button.after(r.queueEl)),l.dnd){var u=l.dropTarget?e(l.dropTarget):r.queueEl.get(0);u.addEventListener("dragleave",function(e){e.preventDefault(),e.stopPropagation()},!1),u.addEventListener("dragenter",function(e){e.preventDefault(),e.stopPropagation()},!1),u.addEventListener("dragover",function(e){e.preventDefault(),e.stopPropagation()},!1),u.addEventListener("drop",r.drop,!1)}XMLHttpRequest.prototype.sendAsBinary||(XMLHttpRequest.prototype.sendAsBinary=function(e){function t(e){return 255&e.charCodeAt(0)}var n=Array.prototype.map.call(e,t),i=new Uint8Array(n);this.send(i.buffer)}),"function"==typeof l.onInit&&l.onInit.call(o)})},debug:function(){return this.each(function(){console.log(e(this).data("uploadifive"))})},clearQueue:function(){this.each(function(){var n=e(this),o=n.data("uploadifive"),r=o.settings;for(var l in o.inputs)for(input=o.inputs[l],limit=input.files.length,i=0;i<limit;i++)file=input.files[i],t.cancel.call(n,file);"function"==typeof r.onClearQueue&&r.onClearQueue.call(n,e("#"+o.settings.queueID))})},cancel:function(n,i){this.each(function(){var o=e(this),r=o.data("uploadifive"),l=r.settings;"string"==typeof n&&(isNaN(n)||(fileID="uploadifive-"+e(this).attr("id")+"-file-"+n),n=e("#"+fileID).data("file")),n.skip=!0,r.filesCancelled++,n.uploading&&(r.uploads.current--,n.uploading=!1,n.xhr.abort(),delete n.xhr,t.upload.call(o)),e.inArray("onCancel",l.overrideEvents)<0&&r.removeQueueItem(n,i),"function"==typeof l.onCancel&&l.onCancel.call(o,n)})},upload:function(t,n){this.each(function(){var i=e(this),o=i.data("uploadifive"),r=o.settings;if(t)o.uploadFile.call(i,t);else if(o.uploads.count+o.uploads.current<r.uploadLimit||0==r.uploadLimit){if(!n){o.uploads.attempted=0,o.uploads.successsful=0,o.uploads.errors=0;var l=o.filesToUpload();"function"==typeof r.onUpload&&r.onUpload.call(i,l)}e("#"+r.queueID).find(".uploadifive-queue-item").not(".error, .complete").each(function(){return _file=e(this).data("file"),o.uploads.current>=r.simUploadLimit&&0!==r.simUploadLimit||o.uploads.current>=r.uploadLimit&&0!==r.uploadLimit||o.uploads.count>=r.uploadLimit&&0!==r.uploadLimit?!1:void(r.checkScript?(_file.checking=!0,skipFile=o.checkExists(_file),_file.checking=!1,skipFile||o.uploadFile(_file,!0)):o.uploadFile(_file,!0))}),0==e("#"+r.queueID).find(".uploadifive-queue-item").not(".error, .complete").size()&&o.queueComplete()}else 0==o.uploads.current&&(e.inArray("onError",r.overrideEvents)<0&&o.filesToUpload()>0&&0!=r.uploadLimit&&alert("The maximum upload limit has been reached."),"function"==typeof r.onError&&r.onError.call(i,"UPLOAD_LIMIT_EXCEEDED",o.filesToUpload()))})},destroy:function(){this.each(function(){var n=e(this),i=n.data("uploadifive"),o=i.settings;t.clearQueue.call(n),o.queueID||e("#"+o.queueID).remove(),n.siblings("input").remove(),n.show().insertBefore(i.button),i.button.remove(),"function"==typeof o.onDestroy&&o.onDestroy.call(n)})}};e.fn.uploadifive=function(n){return t[n]?t[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void e.error("The method "+n+" does not exist in $.uploadify"):t.init.apply(this,arguments);
}}(jQuery),function(e){var t={init:function(n){return this.each(function(){var o=e(this);o.data("uploadifive",{inputs:{},inputCount:0,fileID:0,queue:{count:0,selected:0,replaced:0,errors:0,queued:0,cancelled:0},uploads:{current:0,attempts:0,successful:0,errors:0,count:0}});var r=o.data("uploadifive"),l=r.settings=e.extend({auto:!0,buttonClass:!1,buttonText:"Select Files",checkScript:!1,dnd:!0,dropTarget:!1,fileObjName:"Filedata",fileSizeLimit:0,fileType:!1,formData:{},height:30,itemTemplate:!1,method:"post",multi:!0,overrideEvents:[],queueID:!1,queueSizeLimit:0,removeCompleted:!1,simUploadLimit:0,truncateLength:0,uploadLimit:0,uploadScript:"uploadifive.php",width:100},n);if(isNaN(l.fileSizeLimit)){var a=1.024*parseInt(l.fileSizeLimit);l.fileSizeLimit.indexOf("KB")>-1?l.fileSizeLimit=1e3*a:l.fileSizeLimit.indexOf("MB")>-1?l.fileSizeLimit=1e6*a:l.fileSizeLimit.indexOf("GB")>-1&&(l.fileSizeLimit=1e9*a)}else l.fileSizeLimit=1024*l.fileSizeLimit;if(r.inputTemplate=e('<input type="file">').css({"font-size":l.height+"px",opacity:0,position:"absolute",right:"-3px",top:"-3px","z-index":999}),r.createInput=function(){var n=r.inputTemplate.clone(),i=n.name="input"+r.inputCount++;l.multi&&n.attr("multiple",!0),l.fileType&&n.attr("accept",l.fileType),n.bind("change",function(){r.queue.selected=0,r.queue.replaced=0,r.queue.errors=0,r.queue.queued=0;var n=this.files.length;if(r.queue.selected=n,r.queue.count+n>l.queueSizeLimit&&0!==l.queueSizeLimit)e.inArray("onError",l.overrideEvents)<0&&alert("The maximum number of queue items has been reached ("+l.queueSizeLimit+").  Please select fewer files."),"function"==typeof l.onError&&l.onError.call(o,"QUEUE_LIMIT_EXCEEDED");else{for(var a=0;n>a;a++)file=this.files[a],r.addQueueItem(file);r.inputs[i]=this,r.createInput()}l.auto&&t.upload.call(o),"function"==typeof l.onSelect&&l.onSelect.call(o,r.queue)}),r.currentInput&&r.currentInput.hide(),r.button.append(n),r.currentInput=n},r.destroyInput=function(t){e(r.inputs[t]).remove(),delete r.inputs[t],r.inputCount--},r.drop=function(n){r.queue.selected=0,r.queue.replaced=0,r.queue.errors=0,r.queue.queued=0;var i=n.dataTransfer,a=i.name="input"+r.inputCount++,u=i.files.length;if(r.queue.selected=u,r.queue.count+u>l.queueSizeLimit&&0!==l.queueSizeLimit)e.inArray("onError",l.overrideEvents)<0&&alert("The maximum number of queue items has been reached ("+l.queueSizeLimit+").  Please select fewer files."),"function"==typeof l.onError&&l.onError.call(o,"QUEUE_LIMIT_EXCEEDED");else{for(var s=0;u>s;s++)file=i.files[s],r.addQueueItem(file);r.inputs[a]=i}l.auto&&t.upload.call(o),"function"==typeof l.onDrop&&l.onDrop.call(o,i.files,i.files.length),n.preventDefault(),n.stopPropagation()},r.fileExistsInQueue=function(e){for(var t in r.inputs){input=r.inputs[t],limit=input.files.length;for(var n=0;n<limit;n++)if(existingFile=input.files[n],existingFile.name==e.name&&!existingFile.complete)return!0}return!1},r.removeExistingFile=function(e){for(var n in r.inputs){input=r.inputs[n],limit=input.files.length;for(var i=0;i<limit;i++)existingFile=input.files[i],existingFile.name!=e.name||existingFile.complete||(r.queue.replaced++,t.cancel.call(o,existingFile,!0))}},0==l.itemTemplate?r.queueItem=e('<div class="uploadifive-queue-item">                        <a class="close" href="#">X</a>                        <div><span class="filename"></span><span class="fileinfo"></span></div>                        <div class="progress">                            <div class="progress-bar"></div>                        </div>                    </div>'):r.queueItem=e(l.itemTemplate),r.addQueueItem=function(n){if(e.inArray("onAddQueueItem",l.overrideEvents)<0){r.removeExistingFile(n),n.queueItem=r.queueItem.clone(),n.queueItem.attr("id",l.id+"-file-"+r.fileID++),n.queueItem.find(".close").bind("click",function(){return t.cancel.call(o,n),!1});var i=n.name;i.length>l.truncateLength&&0!=l.truncateLength&&(i=i.substring(0,l.truncateLength)+"..."),n.queueItem.find(".filename").html(i),n.queueItem.data("file",n),r.queueEl.append(n.queueItem)}"function"==typeof l.onAddQueueItem&&l.onAddQueueItem.call(o,n),n.size>l.fileSizeLimit&&0!=l.fileSizeLimit?r.error("FILE_SIZE_LIMIT_EXCEEDED",n):(r.queue.queued++,r.queue.count++)},r.removeQueueItem=function(t,n,i){i||(i=0);var o=n?0:500;t.queueItem&&(" - Completed"!=t.queueItem.find(".fileinfo").html()&&t.queueItem.find(".fileinfo").html(" - Cancelled"),t.queueItem.find(".progress-bar").width(0),t.queueItem.delay(i).fadeOut(o,function(){e(this).remove()}),delete t.queueItem,r.queue.count--)},r.filesToUpload=function(){var e=0;for(var t in r.inputs){input=r.inputs[t],limit=input.files.length;for(var n=0;n<limit;n++)file=input.files[n],file.skip||file.complete||e++}return e},r.checkExists=function(n){if(e.inArray("onCheck",l.overrideEvents)<0){e.ajaxSetup({async:!1});var i=e.extend(l.formData,{filename:n.name});if(e.post(l.checkScript,i,function(e){n.exists=parseInt(e)}),n.exists&&!confirm("A file named "+n.name+" already exists in the upload folder.\nWould you like to replace it?"))return t.cancel.call(o,n),!0}return"function"==typeof l.onCheck&&l.onCheck.call(o,n,n.exists),!1},r.uploadFile=function(t,n){if(!t.skip&&!t.complete&&!t.uploading)if(t.uploading=!0,r.uploads.current++,r.uploads.attempted++,xhr=t.xhr=new XMLHttpRequest,"function"==typeof FormData||"object"==typeof FormData){var a=new FormData;a.append(l.fileObjName,t);for(i in l.formData)a.append(i,l.formData[i]);xhr.open(l.method,l.uploadScript,!0),xhr.upload.addEventListener("progress",function(e){e.lengthComputable&&r.progress(e,t)},!1),xhr.addEventListener("load",function(e){4==this.readyState&&(t.uploading=!1,200==this.status?"Invalid file type."!==t.xhr.responseText?r.uploadComplete(e,t,n):r.error(t.xhr.responseText,t,n):404==this.status?r.error("404_FILE_NOT_FOUND",t,n):403==this.status?r.error("403_FORBIDDEN",t,n):r.error("Unknown Error",t,n))}),xhr.send(a)}else{var u=new FileReader;u.onload=function(i){var a="-------------------------"+(new Date).getTime(),u="--",s="\r\n",d="";d+=u+a+s,d+='Content-Disposition: form-data; name="'+l.fileObjName+'"',t.name&&(d+='; filename="'+t.name+'"'),d+=s,d+="Content-Type: application/octet-stream"+s+s,d+=i.target.result+s;for(key in l.formData)d+=u+a+s,d+='Content-Disposition: form-data; name="'+key+'"'+s+s,d+=l.formData[key]+s;d+=u+a+u+s,xhr.upload.addEventListener("progress",function(e){r.progress(e,t)},!1),xhr.addEventListener("load",function(e){t.uploading=!1;var i=this.status;404==i?r.error("404_FILE_NOT_FOUND",t,n):"Invalid file type."!=t.xhr.responseText?r.uploadComplete(e,t,n):r.error(t.xhr.responseText,t,n)},!1);var c=l.uploadScript;if("get"==l.method){var f=e(l.formData).param();c+=f}xhr.open(l.method,l.uploadScript,!0),xhr.setRequestHeader("Content-Type","multipart/form-data; boundary="+a),"function"==typeof l.onUploadFile&&l.onUploadFile.call(o,t),xhr.sendAsBinary(d)},u.readAsBinaryString(t)}},r.progress=function(t,n){if(e.inArray("onProgress",l.overrideEvents)<0){if(t.lengthComputable)var i=Math.round(t.loaded/t.total*100);n.queueItem.find(".fileinfo").html(" - "+i+"%"),n.queueItem.find(".progress-bar").css("width",i+"%")}"function"==typeof l.onProgress&&l.onProgress.call(o,n,t)},r.error=function(n,i,a){if(e.inArray("onError",l.overrideEvents)<0){switch(n){case"404_FILE_NOT_FOUND":errorMsg="404 Error";break;case"403_FORBIDDEN":errorMsg="403 Forbidden";break;case"FORBIDDEN_FILE_TYPE":errorMsg="Forbidden File Type";break;case"FILE_SIZE_LIMIT_EXCEEDED":errorMsg="File Too Large";break;default:errorMsg="Unknown Error"}i.queueItem.addClass("error").find(".fileinfo").html(" - "+errorMsg),i.queueItem.find(".progress").remove()}"function"==typeof l.onError&&l.onError.call(o,n,i),i.skip=!0,"404_FILE_NOT_FOUND"==n?r.uploads.errors++:r.queue.errors++,a&&t.upload.call(o,null,!0)},r.uploadComplete=function(n,i,a){e.inArray("onUploadComplete",l.overrideEvents)<0&&(i.queueItem.find(".progress-bar").css("width","100%"),i.queueItem.find(".fileinfo").html(" - Completed"),i.queueItem.find(".progress").slideUp(250),i.queueItem.addClass("complete")),"function"==typeof l.onUploadComplete&&l.onUploadComplete.call(o,i,i.xhr.responseText),l.removeCompleted&&setTimeout(function(){t.cancel.call(o,i)},3e3),i.complete=!0,r.uploads.successful++,r.uploads.count++,r.uploads.current--,delete i.xhr,a&&t.upload.call(o,null,!0)},r.queueComplete=function(){"function"==typeof l.onQueueComplete&&l.onQueueComplete.call(o,r.uploads)},!(window.File&&window.FileList&&window.Blob&&(window.FileReader||window.FormData)))return"function"==typeof l.onFallback&&l.onFallback.call(o),!1;if(l.id="uploadifive-"+o.attr("id"),r.button=e('<div id="'+l.id+'" class="uploadifive-button">'+l.buttonText+"</div>"),l.buttonClass&&r.button.addClass(l.buttonClass),r.button.css({height:l.height,"line-height":l.height+"px",overflow:"hidden",position:"relative","text-align":"center",width:l.width}),o.before(r.button).appendTo(r.button).hide(),r.createInput.call(o),l.queueID?r.queueEl=e("#"+l.queueID):(l.queueID=l.id+"-queue",r.queueEl=e('<div id="'+l.queueID+'" class="uploadifive-queue" />'),r.button.after(r.queueEl)),l.dnd){var u=l.dropTarget?e(l.dropTarget):r.queueEl.get(0);u.addEventListener("dragleave",function(e){e.preventDefault(),e.stopPropagation()},!1),u.addEventListener("dragenter",function(e){e.preventDefault(),e.stopPropagation()},!1),u.addEventListener("dragover",function(e){e.preventDefault(),e.stopPropagation()},!1),u.addEventListener("drop",r.drop,!1)}XMLHttpRequest.prototype.sendAsBinary||(XMLHttpRequest.prototype.sendAsBinary=function(e){function t(e){return 255&e.charCodeAt(0)}var n=Array.prototype.map.call(e,t),i=new Uint8Array(n);this.send(i.buffer)}),"function"==typeof l.onInit&&l.onInit.call(o)})},debug:function(){return this.each(function(){console.log(e(this).data("uploadifive"))})},clearQueue:function(){this.each(function(){var n=e(this),o=n.data("uploadifive"),r=o.settings;for(var l in o.inputs)for(input=o.inputs[l],limit=input.files.length,i=0;i<limit;i++)file=input.files[i],t.cancel.call(n,file);"function"==typeof r.onClearQueue&&r.onClearQueue.call(n,e("#"+o.settings.queueID))})},cancel:function(n,i){this.each(function(){var o=e(this),r=o.data("uploadifive"),l=r.settings;"string"==typeof n&&(isNaN(n)||(fileID="uploadifive-"+e(this).attr("id")+"-file-"+n),n=e("#"+fileID).data("file")),n.skip=!0,r.filesCancelled++,n.uploading&&(r.uploads.current--,n.uploading=!1,n.xhr.abort(),delete n.xhr,t.upload.call(o)),e.inArray("onCancel",l.overrideEvents)<0&&r.removeQueueItem(n,i),"function"==typeof l.onCancel&&l.onCancel.call(o,n)})},upload:function(t,n){this.each(function(){var i=e(this),o=i.data("uploadifive"),r=o.settings;if(t)o.uploadFile.call(i,t);else if(o.uploads.count+o.uploads.current<r.uploadLimit||0==r.uploadLimit){if(!n){o.uploads.attempted=0,o.uploads.successsful=0,o.uploads.errors=0;var l=o.filesToUpload();"function"==typeof r.onUpload&&r.onUpload.call(i,l)}e("#"+r.queueID).find(".uploadifive-queue-item").not(".error, .complete").each(function(){return _file=e(this).data("file"),o.uploads.current>=r.simUploadLimit&&0!==r.simUploadLimit||o.uploads.current>=r.uploadLimit&&0!==r.uploadLimit||o.uploads.count>=r.uploadLimit&&0!==r.uploadLimit?!1:void(r.checkScript?(_file.checking=!0,skipFile=o.checkExists(_file),_file.checking=!1,skipFile||o.uploadFile(_file,!0)):o.uploadFile(_file,!0))}),0==e("#"+r.queueID).find(".uploadifive-queue-item").not(".error, .complete").size()&&o.queueComplete()}else 0==o.uploads.current&&(e.inArray("onError",r.overrideEvents)<0&&o.filesToUpload()>0&&0!=r.uploadLimit&&alert("The maximum upload limit has been reached."),"function"==typeof r.onError&&r.onError.call(i,"UPLOAD_LIMIT_EXCEEDED",o.filesToUpload()))})},destroy:function(){this.each(function(){var n=e(this),i=n.data("uploadifive"),o=i.settings;t.clearQueue.call(n),o.queueID||e("#"+o.queueID).remove(),n.siblings("input").remove(),n.show().insertBefore(i.button),i.button.remove(),"function"==typeof o.onDestroy&&o.onDestroy.call(n)})}};e.fn.uploadifive=function(n){return t[n]?t[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void e.error("The method "+n+" does not exist in $.uploadify"):t.init.apply(this,arguments)}}(jQuery);